## 第10章 Spring框架

### 10.1 什么是 Spring 框架?

### 10.2 列举一些重要的Spring模块？

### 10.3 @RestController vs @Controller

### 10.4 Spring IOC & AOP

### 10.5 谈谈自己对于 Spring IoC 和 AOP 的理解

### 10.6 Spring AOP 和 AspectJ AOP 有什么区别？

### 10.7 Spring 中的 bean 的作用域有哪些?

### 10.8 Spring 中的单例 bean 的线程安全问题了解吗？

### 10.9 @Component 和 @Bean 的区别是什么？

### 10.10 将一个类声明为Spring的 bean 的注解有哪些?

### 10.11 Spring 中的 bean 生命周期?

### 10.12 spring 高级容器


## 第11章 Spring MVC

### 11.1 说说自己对于 Spring MVC 了解?

### 11.2 Spring MVC 的简单原理图如下：

### 11.3 SpringMVC 工作原理了解吗?

### 11.4 Spring 框架中用到了哪些设计模式？

### 11.5 Spring 管理事务的方式有几种？

### 11.6 Spring 事务中的隔离级别有哪几种?

### 11.7 Spring 事务中哪几种事务传播行为?

### 11.8 @Transactional(rollbackFor = Exception.class)注解了解吗？

### 11.9 Spring源码了解吗?说几个常用的容器

## 12 MyBatis面试题总结

## 12.1 #{}和${}的区别是什么？

## 12.2 Xml 映射文件中，除了常见的 select|insert|updae|delete 标签之外，还有哪些标签？

## 12.3 通常一个 Xml 映射文件，都会写一个 Dao 接口与之对应，请问，这个 Dao 接口的工作原理是什么？Dao 接口里的方法，参数不同时，方法能重载吗？

## 12.4 Mybatis 是如何进行分页的？分页插件的原理是什么？

## 12.5 简述 Mybatis 的插件运行原理，以及如何编写一个插件。

## 12.6 Mybatis 执行批量插入，能返回数据库主键列表吗？

## 12.7 Mybatis 动态 sql 是做什么的？都有哪些动态 sql？能简述一下动态 sql 的执行原理不？


## 12.8 Mybatis 是如何将 sql 执行结果封装为目标对象并返回的？都有哪些映射形式？

## 12.9 Mybatis 能执行一对一、一对多的关联查询吗？都有哪些实现方式，以及它们之间的区别。

## 12.10 Mybatis 是否支持延迟加载？如果支持，它的实现原理是什么？

## 12.11 Mybatis 的 Xml 映射文件中，不同的 Xml 映射文件，id 是否可以重复？

## 12.12 Mybatis 中如何执行批处理？

## 12.13 Mybatis 四大组件？

## 12.14  Mybatis 都有哪些 Executor 执行器？它们之间的区别是什么？

## 12.15  Mybatis 中如何指定使用哪一种 Executor 执行器？

## 12.16  Mybatis 是否可以映射 Enum 枚举类？

## 12.17  Mybatis 映射文件中，如果 A 标签通过 include 引用了 B 标签的内容，请问，B 标签能否定义在 A 标签的后面，还是说必须定义在 A 标签的前面？


## 12.18  简述 Mybatis 的 Xml 映射文件和 Mybatis 内部数据结构之间的映射关系？

## 12.19  为什么说 Mybatis 是半自动 ORM 映射工具？它与全自动的区别在哪里？

## 12.20  谈谈mybatis的源码?


## 第12章 RabbitMQ
Rabbitmq实现消息总线Rabbitmq是实现了高级消息队列协议(AMQP)的开源消息代理软件,也称为面向消息的中间件。 Rabbitmq服务器是用高性能、可伸缩而闻名的 Erlang语言编写而成的,其集群和故障转移是构建在开放电信平台框架上的。

> AMQP是 Advanced Message Queuing Protocol的简称,它是一个面向消息中间件的开放式标准应用层协议。它定义了以下这些特性:
1. 消息方向
2. 消息队列
3. 消息路由(包括点到点和发布-订阅模式)
4. 可靠性
5. 安全性
AMQP要求消息的提供者和客户端接收者的行为要实现对不同供应商可以用相同的方式(比如SMTP、HTTP、FTP等)进行互相操作。在以往的中间件标准中,主要还是建立在API级别,比如JMS,集中于通过不同的中间件实现来建立标准化的程序间的互操作性,而不是在多个中间件产品间实现互操作性。

RabbitMQ以AMQP协议实现,所以它可以支持多种操作系统、多种编程语言，几乎可以覆盖所有主流的企业级技术平台。在微服务架构消息中间件的选型中,它是一个非常适合且优秀的选择。因此,在 Spring Cloud Bus中包含了对 Rabbit的自动化默认配置

### Rabbitmq的基本概念

- Broker:可以理解为消息队列服务器的实体,它是一个中间件应用,负责接收消息生产者的消息,然后将消息发送至消息接收者或者其他的 Broker。-
- Exchange:消息交换机,是消息第一个到达的地方,消息通过它指定的路由规则,分发到不同的消息队列中去。
- Queue:消息队列,消息通过发送和路由之后最终到达的地方,到达 Queue的消息即进入逻辑上等待消费的状态。每个消息都会被发送到一个或多个队列。
- Binding:绑定,它的作用就是把 Exchange和 Queue按照路由规则绑定起来,也就是 Exchange和 Queue之间的虚拟连接。
- Routing Key:路由关键字, Exchange根据这个关键字进行消息投递。
- Virtual host:虚拟主机,它是对 Broker的虚拟划分,将消费者、生产者和它们依赖的AMQP相关结构进行隔离,一般都是为了安全考虚。比如,我们可以在一个 Broker中设置多个虚拟主机,对不同用户进行权限的分离。
- Connection:连接,代表生产者、消费者、 Broker之间进行通信的物理网络。
- Channel:消息通道,用于连接生产者和消费者的逻辑结构。在客户端的每个连接里,可建立多个 Channel,每个 Channel代表一个会话任务,通过 Channel可以隔离同连接中的不同交互内容。
- Producer:消息生产者,制造消息并发送消息的程序。
- Consumer:消息消费者,接收消息并处理消息的程序。

### 消息投递到队列的整个过程大致如下：

1. 客户端连接到消息队列服务器,打开一个Channel

2. 客户端声明一个Exchange,并设置相关属性

3. 客户端声明一个Queue,并设置相关属性。

4. 客户端使用Routing Key,在 Exchange和 Queue之间建立好绑定关系

5. 客户端投递消息到Exchange

6. Exchange接收到消息后,根据消息的Key和已经设置的 Binding,进行消息路由将消息投递到一个或多个Queue里。

   

### Exchange交换机也有几种类型。

1. Direct交换机:完全根据Key进行投递。比如,绑定时设置了 Routing Key为abc那么客户端提交的消息,只有设置了Key为abc的才会被投递到队列。
2. Topic交换机:对Key进行模式匹配后进行投递,可以使用符号#匹配一个或多个词,符号*匹配正好一个词。比如,abc.#匹配abc.def.ghi，abc.*只匹配abc.def。
3. Fanout交换机:不需要任何Key,它采取广播的模式,一个消息进来时,投递到与该交换机绑定的所有队列。

Rabbitmq支持消息的持久化,也就是将数据写在磁盘上。为了数据安全考虑,大多数情况下都会选择持久化。消息队列持久化包括3个部分：

1. Exchange持久化,在声明时指定 durable=>1
2. Queue持久化,在声明时指定 durable=>1。
3. 消息持久化,在投递时指定 delivery mode=>2(1是非持久化)。

如果 Exchange和 Queue都是持久化的,那么它们之间的 Binding也是持久化的。如果Exchange和 Queue两者之间有一个是持久化的,一个是非持久化的,就不允许建立绑定。


## 第13章 SpringBoot

### 1、什么是 Spring Boot？

Spring Boot 是 Spring 开源组织下的子项目，是 Spring 组件一站式解决方案，主要是简化了使用 Spring 的难度，简省了繁重的配置，提供了各种启动器，开发者能快速上手。

### 2、Spring Boot有哪些优点？

减少开发，测试时间和努力。
使用JavaConfig有助于避免使用XML。
避免大量的Maven导入和各种版本冲突。
提供意见发展方法。
通过提供默认值快速开始开发。
没有单独的Web服务器需要。这意味着你不再需要启动Tomcat，Glassfish或其他任何东西。
需要更少的配置 因为没有web.xml文件。只需添加用@Configuration注释的类，然后添加用@Bean注释的方法，Spring将自动加载对象并像以前一样对其进行管理。您甚至可以将@Autowired添加到bean方法中，以使Spring自动装入需要的依赖关系中。基于环境的配置 使用这些属性，您可以将您正在使用的环境传递到应用程序：-Dspring.profiles.active = {enviornment}。在加载主应用程序属性文件后，Spring将在（application{environment} .properties）中加载后续的应用程序属性文件。

### 3、Spring Boot 的核心配置文件有哪几个？它们的区别是什么？

Spring Boot 的核心配置文件是 application 和 bootstrap 配置文件。
application 配置文件这个容易理解，主要用于 Spring Boot 项目的自动化配置。
bootstrap 配置文件有以下几个应用场景。
使用 Spring Cloud Config 配置中心时，这时需要在 bootstrap 配置文件中添加连接到配置中心的配置属性来加载外部配置中心的配置信息； 一些固定的不能被覆盖的属性；一些加密/解密的场景

### 4、Spring Boot 的配置文件有哪几种格式？它们有什么区别？

v.properties 和 .yml，它们的区别主要是书写格式不同。

1.properties

app.user.name = javastack
2.yml

app:
 user:
 name: javastack

### 5、Spring Boot 的核心注解是哪个？它主要由哪几个注解组成的？

启动类上面的注解是@SpringBootApplication，它也是 Spring Boot 的核心注解 主要组合包含了以下 3 个注解：
1.@SpringBootConfiguration：组合了 @Configuration 注解，实现配置文件的功能。
2.@EnableAutoConfiguration：打开自动配置的功能，也可以关闭某个自动配置的选项，如关闭数据源自动配置功能： @SpringBootApplication(exclude = { DataSourceAutoConfiguration.class })。
3.@ComponentScan：Spring组件扫描。

### 6、开启 Spring Boot 特性有哪几种方式？

1.继承spring-boot-starter-parent项目
2.导入spring-boot-dependencies项目依赖

### 7、Spring Boot 需要独立的容器运行吗？

可以不需要，内置了 Tomcat/ Jetty 等容器。

### 8、运行 Spring Boot 有哪几种方式？

1.打包用命令或者放到容器中运行
2.用 Maven/ Gradle 插件运行
3.直接执行 main 方法运行

### 9、Spring Boot 自动配置原理是什么？

注解 @EnableAutoConfiguration, @Configuration, @ConditionalOnClass 就是自动配置的核心，首先它得是一个配置文件，其次根据类路径下是否有这个类去自动配置。

### 10、Spring Boot 2.X 有什么新特性？与 1.X 有什么区别？

配置变更
JDK 版本升级
第三方类库升级
响应式 Spring 编程支持
HTTP/2 支持
配置属性绑定
更多改进与加强…

### 11、如何使用Spring Boot实现分页和排序？

使用Spring Boot实现分页非常简单。使用Spring Data-JPA可以实现将可分页的org.springframework.data.domain.Pageable传递给存储库方法。

### 12，如何实现Spring Boot应用程序的安全性？

为了实现Spring Boot的安全性，我们使用 spring-boot-starter-security依赖项，并且必须添加安全配置。它只需要很少的代码。配置类将必须扩展WebSecurityConfigurerAdapter并覆盖其方法。

### 13，如何集成Spring Boot和ActiveMQ？

对于集成Spring Boot和ActiveMQ，我们使用spring-boot-starter-activemq 依赖关系。 它只需要很少的配置，并且不需要样板代码。

### 14、什么是YAML？

YAML是一种人类可读的数据序列化语言。它通常用于配置文件。 与属性文件相比，如果我们想要在配置文件中添加复杂的属性，YAML文件就更加结构化，而且更少混淆。可以看出YAML具有分层配置数据。

### 15、Spring Boot中的监视器是什么？

Spring boot actuator是spring启动框架中的重要功能之一。Spring boot监视器可帮助您访问生产环境中正在运行的应用程序的当前状态。有几个指标必须在生产环境中进行检查和监控。即使一些外部应用程序可能正在使用这些服务来向相关人员触发警报消息。监视器模块公开了一组可直接作为HTTP URL访问的REST端点来检查状态。

### 16、什么是Swagger？你用Spring Boot实现了它吗？

Swagger广泛用于可视化API，使用Swagger UI为前端开发人员提供在线沙箱。Swagger是用于生成RESTful Web服务的可视化表示的工具，规范和完整框架实现。它使文档能够以与服务器相同的速度更新。当通过Swagger正确定义时，消费者可以使用最少量的实现逻辑来理解远程服务并与其进行交互。因此，Swagger消除了调用服务时的猜测。

### 17,如何使用Spring Boot实现异常处理？

Spring提供了一种使用ControllerAdvice处理异常的非常有用的方法。 我们通过实现一个ControlerAdvice类，来处理控制器类抛出的所有异常。

### 18,RequestMapping 和 GetMapping 的不同之处在哪里？

RequestMapping 具有类属性的，可以进行 GET,POST,PUT 或者其它的注释中具有的请求方法。
GetMapping 是 GET 请求方法中的一个特例。它只是 ResquestMapping 的一个延伸，目的是为了提高清晰度。

### 19、Spring Boot 可以兼容老 Spring 项目吗，如何做？

可以兼容，使用 @ImportResource 注解导入老 Spring 项目配置文件。

### 20、保护 Spring Boot 应用有哪些方法？

在生产中使用HTTPS 使用Snyk检查你的依赖关系 升级到最新版本 启用CSRF保护 使用内容安全策略防止XSS攻击



## 第14章 SpringCloud

### 1. 什么是 spring cloud？
spring cloud 是一系列框架的有序集合。它利用 spring boot 的开发便利性巧妙地简化了分布式系统基础设施的开发，如服务发现注册、配置中心、消息总线、负载均衡、断路器、数据监控等，都可以用 spring boot 的开发风格做到一键启动和部署。

### 2. spring cloud 断路器的作用是什么？
在分布式架构中，断路器模式的作用也是类似的，当某个服务单元发生故障（类似用电器发生短路）之后，通过断路器的故障监控（类似熔断保险丝），向调用方返回一个错误响应，而不是长时间的等待。这样就不会使得线程因调用故障服务被长时间占用不释放，避免了故障在分布式系统中的蔓延。

### 3. spring cloud 的核心组件有哪些？
Eureka：服务注册于发现。

Feign：基于动态代理机制，根据注解和选择的机器，拼接请求 url 地址，发起请求。

Ribbon：实现负载均衡，从一个服务的多台机器中选择一台。

Hystrix：提供线程池，不同的服务走不同的线程池，实现了不同服务调用的隔离，避免了服务雪崩的问题。

Zuul：网关管理，由 Zuul 网关转发请求给对应的服务。

### 4. SpringCloud和Dubbo 
SpringCloud和Dubbo都是现在主流的微服务架构
SpringCloud是Apache旗下的Spring体系下的微服务解决方案
Dubbo是阿里系的分布式服务治理框架
从技术维度上,其实SpringCloud远远的超过Dubbo,Dubbo本身只是实现了服务治理,而SpringCloud现在以及有21个子项目以后还会更多
所以其实很多人都会说Dubbo和SpringCloud是不公平的
但是由于RPC以及注册中心元数据等原因,在技术选型的时候我们只能二者选其一,所以我们常常为用他俩来对比
服务的调用方式Dubbo使用的是RPC远程调用,而SpringCloud使用的是 Rest API,其实更符合微服务官方的定义
服务的注册中心来看,Dubbo使用了第三方的ZooKeeper作为其底层的注册中心,实现服务的注册和发现,SpringCloud使用Spring Cloud Netflix Eureka实现注册中心,当然SpringCloud也可以使用ZooKeeper实现,但一般我们不会这样做
服务网关,Dubbo并没有本身的实现,只能通过其他第三方技术的整合,而SpringCloud有Zuul路由网关,作为路由服务器,进行消费者的请求分发,SpringCloud还支持断路器,与git完美集成分布式配置文件支持版本控制,事务总线实现配置文件的更新与服务自动装配等等一系列的微服务架构要素

从技术选型上讲~

目前国内的分布式系统选型主要还是Dubbo毕竟国产,而且国内工程师的技术熟练程度高,并且Dubbo在其他维度上的缺陷可以由其他第三方框架进行集成进行弥补
而SpringCloud目前是国外比较流行,当然我觉得国内的市场也会慢慢的偏向SpringCloud,就连刘军作为Dubbo重启的负责人也发表过观点,Dubbo的发展方向是积极适应SpringCloud生态,并不是起冲突

#### Rest和RPC对比

其实如果仔细阅读过微服务提出者马丁福勒的论文的话可以发现其定义的服务间通信机制就是Http Rest,
RPC最主要的缺陷就是服务提供方和调用方式之间依赖太强,我们需要为每一个微服务进行接口的定义,并通过持续继承发布,需要严格的版本控制才不会出现服务提供和调用之间因为版本不同而产生的冲突
而REST是轻量级的接口,服务的提供和调用不存在代码之间的耦合,只是通过一个约定进行规范,但也有可能出现文档和接口不一致而导致的服务集成问题,但可以通过swagger工具整合,是代码和文档一体化解决,所以REST在分布式环境下比RPC更加灵活
这也是为什么当当网的DubboX在对Dubbo的增强中增加了对REST的支持的原因

文档质量和社区活跃度

SpringCloud社区活跃度远高于Dubbo,毕竟由于梁飞团队的原因导致Dubbo停止更新迭代五年,而中小型公司无法承担技术开发的成本导致Dubbo社区严重低落,而SpringCloud异军突起,迅速占领了微服务的市场,背靠Spring混的风生水起
Dubbo经过多年的积累文档相当成熟,对于微服务的架构体系各个公司也有稳定的现状

### 5. SpringBoot和SpringCloud
SpringBoot是Spring推出用于解决传统框架配置文件冗余,装配组件繁杂的基于Maven的解决方案,旨在快速搭建单个微服务
而SpringCloud专注于解决各个微服务之间的协调与配置,服务之间的通信,熔断,负载均衡等
技术维度并相同,并且SpringCloud是依赖于SpringBoot的,而SpringBoot并不是依赖与SpringCloud,甚至还可以和Dubbo进行优秀的整合开发

总结:

SpringBoot专注于快速方便的开发单个个体的微服务

SpringCloud是关注全局的微服务协调整理治理框架,整合并管理各个微服务,为各个微服务之间提供,配置管理,服务发现,断路器,路由,事件总线等集成服务

SpringBoot不依赖于SpringCloud,SpringCloud依赖于SpringBoot,属于依赖关系

SpringBoot专注于快速,方便的开发单个的微服务个体,SpringCloud关注全局的服务治理框架

### 6. 微服务之间是如何独立通讯的
1.远程过程调用（Remote Procedure Invocation）：
       也就是我们常说的服务的注册与发现
       直接通过远程过程调用来访问别的service。
       优点：
       简单，常见,因为没有中间件代理，系统更简单

       缺点：
       只支持请求/响应的模式，不支持别的，比如通知、请求/异步响应、发布/订阅、发布/异步响应
       降低了可用性，因为客户端和服务端在请求过程中必须都是可用的

2.消息：
       使用异步消息来做服务间通信。服务间通过消息管道来交换消息，从而通信。
       优点:
       把客户端和服务端解耦，更松耦合
       提高可用性，因为消息中间件缓存了消息，直到消费者可以消费
       支持很多通信机制比如通知、请求/异步响应、发布/订阅、发布/异步响应

       缺点:
       消息中间件有额外的复杂

### 7. 负载均衡的意义是什么?
在计算中，负载均衡可以改善跨计算机，计算机集群，网络链接，中央处理单元或磁盘驱动器等多种计算资源的工作负载分布。负载均衡旨在优化资源使用，最大吞吐量，最小响应时间并避免任何单一资源的过载。使用多个组件进行负载均衡而不是单个组件可能会通过冗余来提高可靠性和可用性。负载平衡通常涉及专用软件或硬件，例如多层交换机或域名系统服务进程。

### 8. springcloud如何实现服务的注册?
1.服务发布时，指定对应的服务名,将服务注册到 注册中心(eureka zookeeper)
2.注册中心加@EnableEurekaServer,服务用@EnableDiscoveryClient，然后用ribbon或feign进行服务直接的调用发现。

### 9. 什么是服务熔断?什么是服务降级
在复杂的分布式系统中,微服务之间的相互调用,有可能出现各种各样的原因导致服务的阻塞,在高并发场景下,服务的阻塞意味着线程的阻塞,导致当前线程不可用,服务器的线程全部阻塞,导致服务器崩溃,由于服务之间的调用关系是同步的,会对整个微服务系统造成服务雪崩

为了解决某个微服务的调用响应时间过长或者不可用进而占用越来越多的系统资源引起雪崩效应就需要进行服务熔断和服务降级处理。

所谓的服务熔断指的是某个服务故障或异常一起类似显示世界中的“保险丝"当某个异常条件被触发就直接熔断整个服务，而不是一直等到此服务超时。

服务熔断就是相当于我们电闸的保险丝,一旦发生服务雪崩的,就会熔断整个服务,通过维护一个自己的线程池,当线程达到阈值的时候就启动服务降级,如果其他请求继续访问就直接返回fallback的默认值

### 10. 微服务的优缺点分别是什么?说下你在项目开发中碰到的坑
优点

每一个服务足够内聚,代码容易理解
开发效率提高,一个服务只做一件事
微服务能够被小团队单独开发
微服务是松耦合的,是有功能意义的服务
可以用不同的语言开发,面向接口编程
易于与第三方集成
微服务只是业务逻辑的代码,不会和HTML,CSS或者其他界面组合

        开发中,两种开发模式
                 前后端分离
                 全栈工程师

可以灵活搭配,连接公共库/连接独立库

缺点

分布式系统的负责性
多服务运维难度,随着服务的增加,运维的压力也在增大
系统部署依赖
服务间通信成本
数据一致性
系统集成测试
性能监控

### 11. 你所知道的微服务技术栈？
维度(springcloud)
服务开发：springboot spring springmvc
服务配置与管理:Netfix公司的Archaiusm ,阿里的Diamond
服务注册与发现:Eureka,Zookeeper
服务调用:Rest RPC gRpc
服务熔断器:Hystrix
服务负载均衡:Ribbon Nginx
服务接口调用:Fegin
消息队列:Kafka Rabbitmq activemq
服务配置中心管理:SpringCloudConfig
服务路由（API网关）Zuul
事件消息总线:SpringCloud Bus

### 12. Eureka和ZooKeeper都可以提供服务注册与发现的功能,请说说两个的区别
1.ZooKeeper保证的是CP,Eureka保证的是AP

ZooKeeper在选举期间注册服务瘫痪,虽然服务最终会恢复,但是选举期间不可用的,
Eureka各个节点是平等关系,只要有一台Eureka就可以保证服务可用,而查询到的数据并不是最新的,自我保护机制会导致Eureka不再从注册列表移除因长时间没收到心跳而应该过期的服务.
Eureka仍然能够接受新服务的注册和查询请求,但是不会被同步到其他节点(高可用)

当网络稳定时,当前实例新的注册信息会被同步到其他节点中(最终一致性)
Eureka可以很好的应对因网络故障导致部分节点失去联系的情况,而不会像ZooKeeper一样使得整个注册系统瘫痪

2.ZooKeeper有Leader和Follower角色,Eureka各个节点平等

3.ZooKeeper采用过半数存活原则,Eureka采用自我保护机制解决分区问题

4.Eureka本质上是一个工程,而ZooKeeper只是一个进程

### 13. eureka自我保护机制是什么?
当Eureka Server 节点在短时间内丢失了过多实例的连接时（比如网络故障或频繁启动关闭客户端）节点会进入自我保护模式，保护注册信息，不再删除注册数据，故障恢复时，自动退出自我保护模式。

### 14. 什么是Ribbon？
ribbon是一个负载均衡客户端，可以很好的控制htt和tcp的一些行为。feign默认集成了ribbon。

### 15. 什么是feigin？它的优点是什么？
1.feign采用的是基于接口的注解
2.feign整合了ribbon，具有负载均衡的能力
3.整合了Hystrix，具有熔断的能力

使用:
1.添加pom依赖。
2.启动类添加@EnableFeignClients
3.定义一个接口@FeignClient(name=“xxx”)指定调用哪个服务

### 16. Ribbon和Feign的区别？
1.Ribbon都是调用其他服务的，但方式不同。
2.启动类注解不同，Ribbon是@RibbonClient feign的是@EnableFeignClients
3.服务指定的位置不同，Ribbon是在@RibbonClient注解上声明，Feign则是在定义抽象方法的接口中使用@FeignClient声明。
4.调用方式不同，Ribbon需要自己构建http请求，模拟http请求然后使用RestTemplate发送给其他服务，步骤相当繁琐。Feign需要将调用的方法定义成抽象方法即可。

### 17. 什么是Spring Cloud Bus?
spring cloud bus 将分布式的节点用轻量的消息代理连接起来，它可以用于广播配置文件的更改或者服务直接的通讯，也可用于监控。
如果修改了配置文件，发送一次请求，所有的客户端便会重新读取配置文件。
使用:
1.添加依赖
2.配置rabbimq

### 18. 什么是Hystrix?
防雪崩利器，具备服务降级，服务熔断，依赖隔离，监控（Hystrix Dashboard）
服务降级:
双十一 提示 哎哟喂，被挤爆了。 app秒杀 网络开小差了，请稍后再试。
优先核心服务，非核心服务不可用或弱可用。通过HystrixCommand注解指定。
fallbackMethod(回退函数)中具体实现降级逻辑。

### 19. springcloud断路器作用?
当一个服务调用另一个服务由于网络原因或自身原因出现问题，调用者就会等待被调用者的响应 当更多的服务请求到这些资源导致更多的请求等待，发生连锁效应（雪崩效应）
断路器有完全打开状态:一段时间内 达到一定的次数无法调用 并且多次监测没有恢复的迹象 断路器完全打开 那么下次请求就不会请求到该服务
半开:短时间内 有恢复迹象 断路器会将部分请求发给该服务，正常调用时 断路器关闭
关闭：当服务一直处于正常状态 能正常调用

### 20. 什么是SpringCloudConfig?
在分布式系统中，由于服务数量巨多，为了方便服务配置文件统一管理，实时更新，所以需要分布式配置中心组件。在Spring Cloud中，有分布式配置中心组件spring cloud config ，它支持配置服务放在配置服务的内存中（即本地），也支持放在远程Git仓库中。在spring cloud config 组件中，分两个角色，一是config server，二是config client。

使用：
1、添加pom依赖
2、配置文件添加相关配置
3、启动类添加注解@EnableConfigServer

### 21. 架构？
在微服务架构中，需要几个基础的服务治理组件，包括服务注册与发现、服务消费、负载均衡、断路器、智能路由、配置管理等，由这几个基础组件相互协作，共同组建了一个简单的微服务系统

在Spring Cloud微服务系统中，一种常见的负载均衡方式是，客户端的请求首先经过负载均衡（zuul、Ngnix），再到达服务网关（zuul集群），然后再到具体的服。，服务统一注册到高可用的服务注册中心集群，服务的所有的配置文件由配置服务管理，配置服务的配置文件放在git仓库，方便开发人员随时改配置。

### 22.Ribbon、Feign和OpenFeign的区别?
Ribbon
Ribbon 是 Netflix开源的基于HTTP和TCP等协议负载均衡组件

Ribbon 可以用来做客户端负载均衡，调用注册中心的服务

Ribbon的使用需要代码里手动调用目标服务，请参考官方示例：https://github.com/Netflix/ribbon

Feign
Feign是Spring Cloud组件中的一个轻量级RESTful的HTTP服务客户端

Feign内置了Ribbon，用来做客户端负载均衡，去调用服务注册中心的服务。

Feign的使用方式是：使用Feign的注解定义接口，调用这个接口，就可以调用服务注册中心的服务

Feign支持的注解和用法请参考官方文档：https://github.com/OpenFeign/feign

Feign本身不支持Spring MVC的注解，它有一套自己的注解

OpenFeign
OpenFeign是Spring Cloud 在Feign的基础上支持了Spring MVC的注解，如@RequesMapping等等。
OpenFeign的@FeignClient可以解析SpringMVC的@RequestMapping注解下的接口，
并通过动态代理的方式产生实现类，实现类中做负载均衡并调用其他服务。


## 第15章 微服务相关
### 15.1 为什么要网关？
### 15.2 你知道有哪些常见的网关系统？
### 15.3 限流的算法有哪些？
### 15.4 为什么要分布式 id ？
### 15.5 分布式 id 生成策略有哪些？
### 15.6 了解RPC吗？
### 15.7 有哪些常见的 RPC 框架？
### 15.8 如果让你自己设计 RPC 框架你会如何设计？
### 15.9 Dubbo 了解吗？
### 15.10 Dubbo 提供了哪些负载均衡策略？
### 15.11 谈谈你对微服务领域的了解和认识

## 第16章 Linux相关




## 真题

### 1.mysql的存储引擎有哪几种？

### 2.mysql有几种事务隔离级别？

### 3.innoDB在可重复读的隔离级别下面，每insert一个数据的加锁过程是什么样的？

### 4.mysql索引是哪种数据结构？

### 5.它和b树的主要区别是？

### 6.mysql索引遵循什么原则？具体讲讲

### 7.join和子查询一般分别在什么场景下使用？（海量数据处理数据算法类的）

### 8.有没有做过分库分表？为什么要做分库分表？使用了什么技术实现？（分库分表位，分布式场景）

### 9.不考虑硬件扩展，不考虑mysql本身性能，你一般怎么考虑优化？（我答了缓存，然后就开始讲缓存了）

### 10.缓存击穿和缓存雪崩有了解过吗？什么场景会发生？

### 11.如何避免缓存雪崩？

### 12.潜在缓存击穿的key被高并发访问，我如何确保更新key的时候尽可能平稳的减少db的压力

### 13.对单机redis是单进程单线程，如何解决并发竞争问题？

### 14.集群的话数据迁移是怎么玩的？集群模式的原理？

### 15.简单介绍一下jvm内存模型

### 16.新生代老年代元空间内存地址有没有什么要求？是否要求一定要连续？

### 17.聊一下垃圾回收算法？

### 18.new一个对象jvm是如何给用户分配内存的？

### 19.10个线程一起new对象，如何避免同时指向同一个内存的问题？

### 20.为什么你用springboot，相对于spring有哪些优点？

### 21.springboot核心配置文件是哪几个？

### 22.springboot启动的类上需要打一个什么注解？

### 23.springboot工程启动的过程？加载的哪些配置文件？哪些bean？

### 24.beanfactory和applicationcontext 的区别？

### 25.spring 的IOC过程中bean到底放在哪里的？

### 26.是否用过其他中间件？消息，远程服务之类的？

### 27.kalfka 主要的特点

### 28.kalfka的hk机制？

### 29.netty，几种io的区别？分别使用于哪种场景？

### 30.聊天工具，视频网站适合用哪种方式？

### 31.算法有接触过？数据结构有看过吗？hashmap和concurrenthashmap有什么区别？

### 32.concurrenthashmap如何保证线程安全的？